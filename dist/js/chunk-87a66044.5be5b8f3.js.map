{"version":3,"sources":["webpack:///./src/views/admin/live-iframe.vue?b01d","webpack:///./src/components/drawing-board.vue?c752","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/views/admin/live-video.vue?a3b2","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/views/admin/live-video.vue?3826","webpack:///./src/components/drawing-board.vue?a33e","webpack:///src/components/drawing-board.vue","webpack:///./src/components/drawing-board.vue?49b3","webpack:///./src/components/drawing-board.vue","webpack:///./src/views/admin/live-iframe.vue?b885","webpack:///src/views/admin/live-iframe.vue","webpack:///./src/views/admin/live-iframe.vue?1127","webpack:///./src/views/admin/live-iframe.vue","webpack:///src/views/admin/live-video.vue","webpack:///./src/views/admin/live-video.vue?4aa0","webpack:///./src/views/admin/live-video.vue"],"names":["$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","this","len","length","actualStart","argumentsLength","arguments","TypeError","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","callbackfn","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","admin","_v","_e","attrs","directives","name","rawName","value","expression","live","on","$event","$$selectedVal","prototype","filter","call","options","o","selected","map","val","_value","stage","multiple","changeStage","_l","$store","getters","key","domProps","_s","text","startLive","stopLive","stage_users","user","isOnline","_id","i","userToDraw","class","fullname","staticStyle","time","youtubeSecret","board","_m","mess","e","keyCode","sendMessage","composing","message","expVideos","staticRenderFns","color","erease","lineWidth","handleMouseDown","handleMouseUp","handleMouseMove","props","mounted","role","drawAllowed","c","document","getElementById","ctx","getContext","imageSmoothingEnabled","data","userId","mouse","current","x","y","previous","down","computed","currentMouse","rect","getBoundingClientRect","console","log","top","left","watch","methods","draw","strokeStyle","event","lineTo","stroke","mouseDownAction","clientX","clientY","window","scrollTo","closePath","beginPath","moveTo","mouseMoveAction","clearRect","component","ref","style","display","played","src","toggleVideoPlay","setSpeed","rate","setVolume","volume","mobile","deleteClipboard","setTimeout","beforeDestroy","clearTimeout","setTimeOut","setTimeOut2","playing","player","watermark","adminData","copyToClipboard","el","textToCopy","select","execCommand","navigator","clipboard","Promise","clipboardData","setData","res","body","removeChild","rej","vid","contentWindow","postMessage","func","args","JSON","stringify","comm","vol","seekTo","htmlToDocument","doc","updateIframe","iframeDocument","open","write","documentElement","innerHTML","close","components","DrawingBoard","VideoIframe","online","seconds","messages","viewers","username","getStageUsers","state","destroyed"],"mappings":"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","file":"js/chunk-87a66044.5be5b8f3.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-iframe.vue?vue&type=style&index=0&id=cf005a4c&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawing-board.vue?vue&type=style&index=0&id=1214e3ce&scoped=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-video.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cont\"},[(_vm.admin == 1)?_c('h3',{staticClass:\"text-center\"},[_vm._v(\"بدأ بث مباشر جديد\")]):_vm._e(),(_vm.admin != 1)?_c('h3',{staticClass:\"text-center\"},[_vm._v(\"بث مباشر\")]):_vm._e(),_c('hr'),(_vm.admin == 1)?_c('div',{staticClass:\"admin-control\"},[_c('div',{staticClass:\"row align-items-center\",attrs:{\"dir\":\"rtl\"}},[_c('div',{staticClass:\"col-md-6\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.stage),expression:\"stage\"}],staticClass:\"form-control\",attrs:{\"disabled\":_vm.live},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.stage=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.changeStage]}},_vm._l((_vm.$store.getters.stages),function(stage){return _c('option',{key:stage.value,domProps:{\"value\":stage.value}},[_vm._v(\" \"+_vm._s(stage.text)+\" \")])}),0)]),_c('div',{staticClass:\"col-md-6 butt\"},[(!_vm.live)?_c('button',{staticClass:\"btn w-100 start\",on:{\"click\":_vm.startLive}},[_vm._v(\"ابدأ\")]):_vm._e(),(_vm.live)?_c('button',{staticClass:\"btn btn-danger end w-100\",on:{\"click\":_vm.stopLive}},[_vm._v(\" اوقف البث \")]):_vm._e()])])]):_vm._e(),(_vm.admin == 1)?_c('div',{staticClass:\"w-100 online-users\"},[_c('hr'),_c('div',{staticClass:\"row users\"},_vm._l((_vm.stage_users.filter(\n          function (user) { return _vm.isOnline(user._id) == 'online'; }\n        )),function(user,i){return _c('div',{key:i,staticClass:\"col-md-2 user\",on:{\"click\":function($event){_vm.userToDraw = user._id}}},[_c('i',{staticClass:\"fa fa-user\"}),_c('span',{staticClass:\"state\",class:_vm.isOnline(user._id)},[_vm._v(_vm._s(_vm.isOnline(user._id)))]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(user.fullname))]),(user._id == _vm.userToDraw)?_c('p',{staticStyle:{\"background\":\"green\",\"color\":\"#fff\"}},[_vm._v(\" draw allowed \")]):_vm._e()])}),0)]):_vm._e(),_c('div',{staticClass:\"timer m-auto\"},[_vm._v(_vm._s(_vm.time))]),_c('hr'),_c('div',{staticClass:\"con row\"},[_c('div',{staticClass:\"col-md-8\",staticStyle:{\"position\":\"relative\",\"height\":\"90vh\"}},[_c('video-iframe',{attrs:{\"src\":'https://www.youtube.com/embed/live_stream?channel=' + _vm.youtubeSecret}})],1),_c('div',{staticClass:\"comments\",class:_vm.board ? 'col-md-12' : 'col-md-4'},[_vm._m(0),_c('div',{staticClass:\"messages\"},_vm._l((_vm.messages),function(mess,i){return _c('div',{key:i,staticClass:\"message\"},[_c('div',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(mess.name)),_c('i',{staticClass:\"fa fa-user\",staticStyle:{\"margin-left\":\"4px\"}})]),_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(mess.text))])])}),0),_c('hr'),_c('div',{staticClass:\"send d-flex align-items-center\"},[_c('div',{staticClass:\"flex-grow-1\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],staticClass:\"form-control w-100\",staticStyle:{\"border-radius\":\"8px\"},attrs:{\"placeholder\":\"ارسل رسالة\"},domProps:{\"value\":(_vm.message)},on:{\"keydown\":function (e) {\n                if (e.keyCode == 13) { _vm.sendMessage(); }\n              },\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}})]),_c('div',{staticClass:\"ml-1\"},[_c('i',{staticClass:\"fa fa-send\",staticStyle:{\"cursor\":\"pointer\",\"font-size\":\"1.4rem\"},on:{\"click\":_vm.sendMessage}})])])])]),_c('hr'),_c('br'),_c('br'),_c('app-iframe',{attrs:{\"src\":_vm.$store.getters.expVideos.live}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('h5',{staticClass:\"text-center\"},[_vm._v(\"الشات الجماعي\")]),_c('hr')])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column align-items-center justify-content-center\"},[_c('div',{staticClass:\"options row w-100 p-2 bg-dark m-4\",attrs:{\"dir\":\"rtl\"}},[_c('div',{staticClass:\"col-md-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.color),expression:\"color\"}],staticClass:\"form-control\",staticStyle:{\"height\":\"50px\",\"width\":\"70px\"},attrs:{\"type\":\"color\"},domProps:{\"value\":(_vm.color)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.color=$event.target.value}}})]),_c('div',{staticClass:\"col-md-1\"},[_c('div',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\",\"cursor\":\"pointer\",\"background\":\"#fff\"},on:{\"click\":_vm.erease}},[_c('i',{staticClass:\"fa fa-rubber\"})])]),_c('div',{staticClass:\"col-md-1\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lineWidth),expression:\"lineWidth\"}],staticClass:\"form-control\",staticStyle:{\"height\":\"50xp\"},attrs:{\"type\":\"range\",\"min\":\"1\",\"max\":\"25\",\"value\":\"5\"},domProps:{\"value\":(_vm.lineWidth)},on:{\"__r\":function($event){_vm.lineWidth=$event.target.value}}})]),(_vm.drawAllowed)?_c('div',{staticClass:\"col-md-2\"},[_c('h5',{staticStyle:{\"color\":\"#fff\"}},[_vm._v(\"مسموح لك بالكتابة\")])]):_vm._e()]),_c('canvas',{attrs:{\"id\":\"canvas\",\"width\":\"1500\",\"height\":\"800\"},on:{\"mousedown\":_vm.handleMouseDown,\"mouseup\":_vm.handleMouseUp,\"mousemove\":_vm.handleMouseMove}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"d-flex flex-column align-items-center justify-content-center\">\n    <div class=\"options row w-100 p-2 bg-dark m-4\" dir=\"rtl\">\n      <div class=\"col-md-1\">\n        <input\n          type=\"color\"\n          v-model=\"color\"\n          style=\"height: 50px; width: 70px\"\n          class=\"form-control\"\n        />\n      </div>\n      <div class=\"col-md-1\">\n        <div\n          @click=\"erease\"\n          style=\"width: 50px; height: 50px; cursor: pointer; background: #fff\"\n        >\n          <i class=\"fa fa-rubber\"></i>\n        </div>\n      </div>\n      <div class=\"col-md-1\">\n        <input\n          v-model=\"lineWidth\"\n          style=\"height: 50xp\"\n          type=\"range\"\n          min=\"1\"\n          max=\"25\"\n          value=\"5\"\n          class=\"form-control\"\n        />\n      </div>\n      <div v-if=\"drawAllowed\" class=\"col-md-2\">\n        <h5 style=\"color: #fff\">مسموح لك بالكتابة</h5>\n      </div>\n    </div>\n    <canvas\n      id=\"canvas\"\n      width=\"1500\"\n      height=\"800\"\n      v-on:mousedown=\"handleMouseDown\"\n      v-on:mouseup=\"handleMouseUp\"\n      v-on:mousemove=\"handleMouseMove\"\n    ></canvas>\n  </div>\n</template>\n<script>\nimport { socket } from \"../main\";\n// import socket from \"socket.io-page\";\nexport default {\n  props: [\"io\", \"userToDraw\"],\n  mounted() {\n    if (this.role == 1) {\n      this.drawAllowed = true;\n    }\n\n    var c = document.getElementById(\"canvas\");\n    this.ctx = c.getContext(\"2d\");\n    this.ctx.imageSmoothingEnabled = false;\n\n    socket().on(\"mouse-down\", (data) => {\n      if (data.userId !== this.userId) this.mouseDownAction(data);\n    });\n    socket().on(\"mouse-up\", (data) => {\n      if (data.userId != this.userId) this.mouse.down = false;\n    });\n    socket().on(\"erease\", (data) => {\n      if (data.userId != this.userId) this.ctx.clearRect(0, 0, 1000, 1000);\n    });\n    socket().on(\"mouse-move\", (data) => {\n      if (data.userId != this.userId) this.mouseMoveAction(data);\n    });\n    socket().on(\"user-to-draw\", (userId) => {\n      if (this.role != 1) {\n        if (userId == this.userId) {\n          this.drawAllowed = true;\n        } else this.drawAllowed = false;\n      }\n    });\n  },\n  data: () => {\n    return {\n      // io: socket(url),\n      ctx: null,\n      color: \"#000\",\n      lineWidth: 2,\n      drawAllowed: false,\n      mouse: {\n        current: {\n          x: 0,\n          y: 0,\n        },\n        previous: {\n          x: 0,\n          y: 0,\n        },\n        down: false,\n      },\n    };\n  },\n  computed: {\n    currentMouse: function () {\n      var c = document.getElementById(\"canvas\");\n      var rect = c.getBoundingClientRect();\n      // var rect = {left: 0, top: 0}\n      console.log(this.mouse.current.y - rect.top);\n      return {\n        x: this.mouse.current.x - rect.left,\n        y: this.mouse.current.y - rect.top,\n        // x: (this.mouse.current.x - rect.left) / (rect.right - rect.left) * c.width,\n        // y: (this.mouse.current.y - rect.top) / (rect.bottom - rect.top) * c.height\n      };\n    },\n    stage() {\n      return this.$store.getters.stage;\n    },\n    role() {\n      return this.$store.getters.role;\n    },\n    userId() {\n      return this.$store.getters.userId;\n    },\n  },\n  watch: {\n    userToDraw(val) {\n      console.log(val);\n      if (this.role == 1) {\n        socket().emit(\"user-to-draw\", { stage: this.stage, userId: val });\n      }\n    },\n  },\n  methods: {\n    draw: function (event) {\n      if (this.mouse.down) {\n        this.ctx.strokeStyle = this.color;\n        if (event.color) this.ctx.strokeStyle = event.color;\n        this.ctx.lineWidth = this.lineWidth;\n        if (event.color) this.ctx.lineWidth = event.lineWidth;\n        this.ctx.lineTo(this.currentMouse.x, this.currentMouse.y);\n        this.ctx.stroke();\n      }\n    },\n\n    handleMouseDown: function (event) {\n      if (!this.drawAllowed) return;\n      this.mouseDownAction(event);\n      socket().emit(\"mouse-down\", {\n        stage: this.stage,\n        userId: this.userId,\n        clientX: event.clientX,\n        clientY: event.clientY,\n      });\n    },\n    mouseDownAction(event) {\n      const rect = document.getElementById(\"canvas\").getBoundingClientRect();\n      console.log(rect);\n      window.scrollTo(0, 1250);\n      this.mouse.down = true;\n      this.ctx.closePath();\n      this.ctx.beginPath();\n\n      this.mouse.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n      this.ctx.moveTo(this.currentMouse.x, this.currentMouse.y);\n    },\n    handleMouseUp: function () {\n      if (!this.drawAllowed) return;\n      this.mouse.down = false;\n      socket().emit(\"mouse-up\", { stage: this.stage, userId: this.userId });\n    },\n\n    handleMouseMove: function (event) {\n      if (!this.mouse.down || !this.drawAllowed) return;\n      this.mouseMoveAction(event);\n      socket().emit(\"mouse-move\", {\n        stage: this.stage,\n        userId: this.userId,\n        clientX: event.clientX,\n        clientY: event.clientY,\n        color: this.color,\n        lineWidth: this.lineWidth,\n      });\n    },\n    mouseMoveAction(event) {\n      if (!this.mouse.down) return;\n      this.mouse.current = {\n        x: event.clientX,\n        y: event.clientY,\n      };\n      this.draw(event);\n    },\n    erease() {\n      if (this.role == 1) {\n        this.ctx.clearRect(0, 0, 1000, 1000);\n        socket().emit(\"erease\", { stage: this.stage, userId: this.userId });\n      }\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\ncanvas {\n  background: white;\n  // height: 100vh;\n  box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.2);\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawing-board.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawing-board.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drawing-board.vue?vue&type=template&id=1214e3ce&scoped=true&\"\nimport script from \"./drawing-board.vue?vue&type=script&lang=js&\"\nexport * from \"./drawing-board.vue?vue&type=script&lang=js&\"\nimport style0 from \"./drawing-board.vue?vue&type=style&index=0&id=1214e3ce&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1214e3ce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg-light p-0\",attrs:{\"id\":\"\"}},[_c('textarea',{staticStyle:{\"position\":\"fixed\",\"top\":\"-100vh\"},attrs:{\"readonly\":\"\",\"id\":\"textarea\"}}),_c('iframe',{ref:\"video\",style:({ display: _vm.played ? 'block' : 'none' }),attrs:{\"id\":\"video\",\"width\":\"100%\",\"height\":\"100%\",\"src\":(_vm.src + \"&theme=dark&autoplay=1&autohide=0&cc_load_policy=1&modestbranding=1&fs=0&showinfo=0&rel=0&iv_load_policy=3&mute=0&loop=0&enablejsapi=1&version=3&playerapiid=ytplayer&controls=1&mode=opaque&&showinfo=0;\"),\"allow\":\"autoplay;\",\"sandbox\":\"allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-top-navigation\"}}),_c('div',{staticClass:\"cover-top\",on:{\"click\":_vm.toggleVideoPlay}}),_c('div',{ref:\"ctrl\",staticClass:\"ctrl_bar\"},[(_vm.src != '')?_c('div',{staticClass:\"ctrl_btns bg-dark\"},[_c('div',{staticClass:\"ctrl_btn\"},[_c('div',{staticClass:\"slidecontainer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rate),expression:\"rate\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"step\":0.25,\"min\":0.25,\"max\":2,\"id\":\"myRange\"},domProps:{\"value\":(_vm.rate)},on:{\"change\":_vm.setSpeed,\"__r\":function($event){_vm.rate=$event.target.value}}})]),_c('label',[_vm._v(\"speed\")])]),_c('div',{staticClass:\"ctrl_btn\"},[_c('div',{staticClass:\"slidecontainer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.volume),expression:\"volume\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"step\":1,\"min\":0,\"max\":100,\"id\":\"myRange\"},domProps:{\"value\":(_vm.volume)},on:{\"change\":_vm.setVolume,\"__r\":function($event){_vm.volume=$event.target.value}}})]),_c('label',[_vm._v(\"volume\")])])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"\" class=\"bg-light p-0\" style=\"\">\r\n    <textarea readonly id=\"textarea\" style=\"position: fixed; top: -100vh\"></textarea>\r\n    <!-- <div class=\"video-background\"> -->\r\n\r\n    <iframe\r\n      :style=\"{ display: played ? 'block' : 'none' }\"\r\n      id=\"video\"\r\n      ref=\"video\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      :src=\"`${src}&theme=dark&autoplay=1&autohide=0&cc_load_policy=1&modestbranding=1&fs=0&showinfo=0&rel=0&iv_load_policy=3&mute=0&loop=0&enablejsapi=1&version=3&playerapiid=ytplayer&controls=1&mode=opaque&amp;&showinfo=0;`\"\r\n      allow=\"autoplay;\"\r\n      sandbox=\"allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-top-navigation\"\r\n    />\r\n    <!-- </div> -->\r\n    <div @click=\"toggleVideoPlay\" class=\"cover-top\"></div>\r\n    <!------------------------------------->\r\n    <!-- <div @click=\"$refs.ctrl.classList.toggle('show')\" class=\"toggleCtrl\">\r\n        <i class=\"fa fa-cogs\"></i>\r\n      </div> -->\r\n    <!------------------------------------->\r\n\r\n    <div ref=\"ctrl\" class=\"ctrl_bar\">\r\n      <div v-if=\"src != ''\" class=\"ctrl_btns bg-dark\">\r\n        <div class=\"ctrl_btn\">\r\n          <div class=\"slidecontainer\">\r\n            <input\r\n              type=\"range\"\r\n              :step=\"0.25\"\r\n              :min=\"0.25\"\r\n              :max=\"2\"\r\n              @change=\"setSpeed\"\r\n              v-model=\"rate\"\r\n              class=\"slider\"\r\n              id=\"myRange\"\r\n            />\r\n          </div>\r\n          <label>speed</label>\r\n        </div>\r\n        <div class=\"ctrl_btn\">\r\n          <div class=\"slidecontainer\">\r\n            <input\r\n              type=\"range\"\r\n              :step=\"1\"\r\n              :min=\"0\"\r\n              :max=\"100\"\r\n              @change=\"setVolume\"\r\n              v-model=\"volume\"\r\n              class=\"slider\"\r\n              id=\"myRange\"\r\n            />\r\n          </div>\r\n          <label>volume</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Capacitor } from \"@capacitor/core\";\r\nimport Axios from \"axios\";\r\n// import html from \"./iframe-html-2\";\r\n\r\nexport default {\r\n  props: [\"src\"],\r\n  mounted() {\r\n    // this.initialize();\r\n    this.mobile = Capacitor.isNative;\r\n    this.deleteClipboard();\r\n    setTimeout(() => {\r\n      this.toggleVideoPlay;\r\n      this.played = true;\r\n      console.log(this.played);\r\n    }, 2300);\r\n  },\r\n  beforeDestroy() {\r\n    // await this.copyToClipboard(\"كان غيرك أشطر\");\r\n    clearTimeout(this.setTimeOut);\r\n    clearTimeout(this.setTimeOut2);\r\n  },\r\n  data() {\r\n    return {\r\n      played: false,\r\n      playing: false,\r\n      mobile: false,\r\n      setTimeOut: null,\r\n      setTimeOut2: null,\r\n      rate: 1,\r\n      volume: 50,\r\n      player: null,\r\n    };\r\n  },\r\n  computed: {\r\n    watermark() {\r\n      return this.$store.getters.adminData.watermark;\r\n    },\r\n  },\r\n  methods: {\r\n    async deleteClipboard() {\r\n      this.setTimeOut = setTimeout(async () => {\r\n        await this.copyToClipboard(\"كان غيرك اشطر\")\r\n          .then((res) => {})\r\n          .catch((e) => {\r\n            // console.log(e);\r\n          });\r\n        this.deleteClipboard();\r\n      }, 100);\r\n    },\r\n    copyToClipboard(textToCopy) {\r\n      // alert(\"Dfff\");\r\n      if (this.mobile) {\r\n        const el = document.getElementById(\"textarea\");\r\n        el.value = textToCopy;\r\n        el.select();\r\n        document.execCommand(\"copy\");\r\n      }\r\n      if (navigator.clipboard != undefined) {\r\n        return new Promise(async (res, rej) => {\r\n          try {\r\n            await navigator.clipboard.writeText(textToCopy);\r\n            res(\"copied\");\r\n          } catch (e) {\r\n            rej(e);\r\n          }\r\n        });\r\n      } else if (window.clipboardData) {\r\n        return new Promise((res, rej) => {\r\n          window.clipboardData.setData(\"Text\", textToCopy);\r\n          res(\"copied2\");\r\n        });\r\n      } else {\r\n        const el = document.getElementById(\"textarea\");\r\n        el.value = textToCopy;\r\n        el.select();\r\n        document.body.removeChild(el);\r\n        return new Promise((res, rej) => {\r\n          document.execCommand(\"copy\") ? res(\"copied3\") : rej(\"error\");\r\n        });\r\n      }\r\n    },\r\n    /////////////////////////////////////////////////////////\r\n    /////////////////////////////////////////////////////////\r\n    /////////////////////////////////////////////////////////\r\n    toggleVideoPlay() {\r\n      const vid = this.$refs.video; //document.getElementById(\"video\");\r\n      if (this.playing) {\r\n        vid.contentWindow.postMessage(\r\n          '{\"event\":\"command\",\"func\":\"' + \"pauseVideo\" + '\",\"args\":\"\"}',\r\n          \"*\"\r\n        );\r\n        this.playing = false;\r\n      } else {\r\n        console.log(vid.contentWindow);\r\n        vid.contentWindow.postMessage(\r\n          '{\"event\":\"command\",\"func\":\"' + \"playVideo\" + '\",\"args\":\"\"}',\r\n          \"*\"\r\n        );\r\n        this.playing = true;\r\n      }\r\n    },\r\n    setSpeed() {\r\n      const rate = +this.rate;\r\n      const vid = document.getElementById(\"video\");\r\n      const comm = {\r\n        event: \"command\",\r\n        func: \"setPlaybackRate\",\r\n        args: [rate, true],\r\n      };\r\n      vid.contentWindow.postMessage(JSON.stringify(comm), \"*\");\r\n    },\r\n    setVolume() {\r\n      const vol = +this.volume;\r\n      const vid = document.getElementById(\"video\");\r\n      const comm = {\r\n        event: \"command\",\r\n        func: \"setVolume\",\r\n        args: [vol, true],\r\n      };\r\n      vid.contentWindow.postMessage(JSON.stringify(comm), \"*\");\r\n    },\r\n    seekTo() {\r\n      const vid = document.getElementById(\"video\");\r\n      const comm = {\r\n        event: \"command\",\r\n        func: \"seekTo\",\r\n        args: [200, true],\r\n      };\r\n      vid.contentWindow.postMessage(JSON.stringify(comm), \"*\");\r\n    },\r\n\r\n    ///////////////////////////////////////////////////////////\r\n    ///////////////////////////////////////////////////////////\r\n    ///////////////////////////////////////////////////////////\r\n    async initialize() {\r\n      const html2 = html.replace(\"##src##\", this.src.split(\"/embed/\")[1]);\r\n      const doc = this.htmlToDocument(html2);\r\n      this.updateIframe(doc);\r\n    },\r\n    htmlToDocument(html) {\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(html, \"text/html\");\r\n      return doc;\r\n    },\r\n    updateIframe(doc) {\r\n      const iframe = this.$refs.frame;\r\n      const iframeDocument = iframe.contentWindow.document;\r\n      iframeDocument.open();\r\n      iframeDocument.write(doc.documentElement.innerHTML);\r\n      iframeDocument.close();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n.video-background {\r\n  background: #000;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: -99;\r\n}\r\n.video-foreground,\r\n.video-background iframe {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  pointer-events: none;\r\n}\r\n\r\n@media (min-aspect-ratio: 16/9) {\r\n  .video-foreground {\r\n    height: 300%;\r\n    top: -100%;\r\n  }\r\n}\r\n@media (max-aspect-ratio: 16/9) {\r\n  .video-foreground {\r\n    width: 300%;\r\n    left: -100%;\r\n  }\r\n}\r\n@media all and (max-width: 600px) {\r\n  .vid-info {\r\n    width: 50%;\r\n    padding: 0.5rem;\r\n  }\r\n  .vid-info h1 {\r\n    margin-bottom: 0.2rem;\r\n  }\r\n}\r\n@media all and (max-width: 500px) {\r\n  .vid-info .acronym {\r\n    display: none;\r\n  }\r\n}\r\n\r\n/************************************** */\r\n/************************************** */\r\n/************************************** */\r\n\r\niframe {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.cover-top {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 40%;\r\n  background: rgba(88, 87, 87, 0);\r\n  &.mobile {\r\n    height: 48%;\r\n  }\r\n}\r\n\r\n/************************************************************ */\r\n/************************************************************ */\r\n/************************************************************ */\r\n/************************************************************ */\r\n\r\n.ctrl_bar {\r\n  position: fixed;\r\n  z-index: 6000;\r\n  bottom: 7%;\r\n  left: 0;\r\n  right: 0;\r\n  width: 100vw;\r\n  transition: all 0.3s ease-in-out;\r\n  transform: translateX(-100vw);\r\n  opacity: 0;\r\n  &.show {\r\n    opacity: 1;\r\n    transform: translateX(0);\r\n  }\r\n}\r\n.ctrl_btns {\r\n  padding: 5px;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n.ctrl_btn {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  &:hover {\r\n    input {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  i {\r\n    color: #fff;\r\n    font-size: 2rem;\r\n  }\r\n  label {\r\n    color: #fff;\r\n    font-weight: 700;\r\n  }\r\n  input {\r\n    opacity: 0;\r\n  }\r\n  @media (max-width: 700px) {\r\n    input {\r\n      opacity: 0;\r\n      transform: translateY(-350%) rotate(270deg);\r\n    }\r\n  }\r\n}\r\n.toggleCtrl {\r\n  z-index: 7000;\r\n  position: fixed;\r\n  left: 1%;\r\n  bottom: 17%;\r\n  background: #000;\r\n  padding: 2px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  i {\r\n    color: #fff;\r\n    font-size: 2.5rem;\r\n  }\r\n  @media (max-width: 700px) {\r\n    i {\r\n      font-size: 1.5rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-iframe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-iframe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./live-iframe.vue?vue&type=template&id=cf005a4c&scoped=true&\"\nimport script from \"./live-iframe.vue?vue&type=script&lang=js&\"\nexport * from \"./live-iframe.vue?vue&type=script&lang=js&\"\nimport style0 from \"./live-iframe.vue?vue&type=style&index=0&id=cf005a4c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cf005a4c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"cont\">\n    <h3 v-if=\"admin == 1\" class=\"text-center\">بدأ بث مباشر جديد</h3>\n    <h3 v-if=\"admin != 1\" class=\"text-center\">بث مباشر</h3>\n    <hr />\n    <div v-if=\"admin == 1\" class=\"admin-control\">\n      <div class=\"row align-items-center\" dir=\"rtl\">\n        <div class=\"col-md-6\">\n          <!-- <div class=\"form-group\"> -->\n          <!-- <label>المرحلة الدراسية</label> -->\n          <select\n            :disabled=\"live\"\n            @change=\"changeStage\"\n            v-model=\"stage\"\n            class=\"form-control\"\n          >\n            <option\n              v-for=\"stage in $store.getters.stages\"\n              :key=\"stage.value\"\n              :value=\"stage.value\"\n            >\n              {{ stage.text }}\n            </option>\n          </select>\n          <!-- </div> -->\n        </div>\n        <div class=\"col-md-6 butt\">\n          <!-- <button @click=\"toggle\" class=\"btn btn-success w-100\">جرب</button> -->\n          <!-- <keep-alive> -->\n          <button v-if=\"!live\" @click=\"startLive\" class=\"btn w-100 start\">ابدأ</button>\n          <button v-if=\"live\" @click=\"stopLive\" class=\"btn btn-danger end w-100\">\n            اوقف البث\n          </button>\n          <!-- </keep-alive> -->\n        </div>\n        <!-- <div class=\"col-md-4\">\n          <div class=\"form-group\">\n            <label>اختر فيديو أو صبورة</label>\n            <select v-model=\"board\" class=\"form-control\">\n              <option :value=\"false\">فيديو</option>\n              <option :value=\"true\">الصبورة</option>\n            </select>\n          </div>\n        </div> -->\n      </div>\n    </div>\n    <!-------------------------------------------------------------->\n    <!------------------------------------------------->\n    <div v-if=\"admin == 1\" class=\"w-100 online-users\">\n      <hr />\n      <div class=\"row users\">\n        <div\n          v-for=\"(user, i) in stage_users.filter(\n            (user) => isOnline(user._id) == 'online'\n          )\"\n          @click=\"userToDraw = user._id\"\n          :key=\"i\"\n          class=\"col-md-2 user\"\n        >\n          <i class=\"fa fa-user\"></i>\n          <span :class=\"isOnline(user._id)\" class=\"state\">{{ isOnline(user._id) }}</span>\n          <div class=\"name\">{{ user.fullname }}</div>\n          <p v-if=\"user._id == userToDraw\" style=\"background: green; color: #fff\">\n            draw allowed\n          </p>\n        </div>\n      </div>\n    </div>\n    <!-------------------------------------------------------------->\n    <!-------------------------------------------------------------->\n\n    <div class=\"timer m-auto\">{{ time }}</div>\n    <hr />\n    <div class=\"con row\">\n      <div class=\"col-md-8\" style=\"position: relative; height: 90vh\">\n        <!-- <iframe\n          width=\"100%\"\n          height=\"415\"\n          :src=\"'https://www.youtube.com/embed/live_stream?channel=' + youtubeSecret\"\n          title=\"YouTube video player\"\n          allowfullscreen\n          frameborder=\"3\"\n          allow=\"autoplay;\"\n        ></iframe> -->\n        <video-iframe\n          :src=\"'https://www.youtube.com/embed/live_stream?channel=' + youtubeSecret\"\n        />\n      </div>\n      <div class=\"comments\" :class=\"board ? 'col-md-12' : 'col-md-4'\">\n        <div class=\"header\">\n          <h5 class=\"text-center\">الشات الجماعي</h5>\n          <hr />\n        </div>\n        <div class=\"messages\">\n          <div v-for=\"(mess, i) in messages\" :key=\"i\" class=\"message\">\n            <div class=\"name\">\n              {{ mess.name }}<i style=\"margin-left: 4px\" class=\"fa fa-user\"></i>\n            </div>\n            <div class=\"text\">{{ mess.text }}</div>\n          </div>\n        </div>\n        <hr />\n        <div class=\"send d-flex align-items-center\">\n          <div class=\"flex-grow-1\">\n            <textarea\n              @keydown=\"\n                (e) => {\n                  if (e.keyCode == 13) sendMessage();\n                }\n              \"\n              v-model=\"message\"\n              class=\"form-control w-100\"\n              placeholder=\"ارسل رسالة\"\n              style=\"border-radius: 8px\"\n            />\n          </div>\n          <div class=\"ml-1\">\n            <!-- <button @click=\"sendMessage\" class=\"btn btn-primary w-75\">ارسل</button> -->\n            <i\n              @click=\"sendMessage\"\n              style=\"cursor: pointer; font-size: 1.4rem\"\n              class=\"fa fa-send\"\n            ></i>\n          </div>\n        </div>\n      </div>\n\n      <!-- <div class=\"col-md-12\">\n        <drawing-board :userToDraw=\"userToDraw\" />\n      </div> -->\n    </div>\n    <hr />\n    <br /><br />\n    <!--------------------------------------------------------->\n    <app-iframe :src=\"$store.getters.expVideos.live\" />\n    <!--------------------------------------------------------->\n  </div>\n</template>\n<script>\nimport { url, socket } from \"../../main\";\nimport Axios from \"axios\";\nimport DrawingBoard from \"../../components/drawing-board\";\nimport VideoIframe from \"./live-iframe.vue\";\n\nexport default {\n  components: {\n    DrawingBoard,\n    VideoIframe,\n  },\n\n  async mounted() {\n    if (this.admin != 1) {\n      this.stage = this.$store.getters.stage;\n      // this.joinRoom();\n    }\n    const res = await Axios.get(\"/getYoutubeSecret\");\n    this.youtubeSecret = res.data.youtubeSecret;\n    this.getStageUsers();\n    socket().on(\"live\", (data) => {\n      this.online = true;\n      this.live = true;\n      this.seconds = data.seconds;\n      this.time = new Date(this.seconds * 1000 - 2 * 60 * 60 * 1000)\n        .toString()\n        .split(\"1970\")[1]\n        .split(\"GMT\")[0];\n    });\n    socket().on(\"finish\", () => {\n      console.log(\"finished \");\n      this.online = false;\n      this.live = false;\n      this.time = \"00:00:00\";\n      this.seconds = 0;\n      if (this.admin != 1) {\n        this.$router.replace(\"/\");\n      }\n    });\n    socket().on(\"comment\", (mess) => {\n      this.messages.push(mess);\n    });\n    socket().on(\"new_user\", (user) => {\n      if (!this.viewers.includes(user.userId)) {\n        this.viewers.push(user.userId);\n      }\n    });\n    socket().on(\"quited\", (userId) => {\n      const index = this.viewers.findIndex((viewer) => viewer == userId);\n      const viewers = [...this.viewers];\n      viewers.splice(index, 1);\n      this.viewers = viewers;\n    });\n    socket().on(\"not_allowed\", () => {\n      this.$router.replace(\"/\");\n    });\n    // socket().on(\"user-to-draw\", (userToDraw) => {\n    //   this.userToDraw = userToDraw;\n    // });\n    if (this.admin == 1) {\n      setInterval(() => {\n        socket().emit(\"getOnline\");\n      }, 2000);\n      /////////\n      socket().on(\"onlineUsers\", (onlineUsers) => {\n        this.viewers = onlineUsers;\n      });\n    }\n    //////////////////////\n  },\n  data() {\n    return {\n      stage: \"6\",\n      live: false,\n      online: false,\n      seconds: 0,\n      time: \"00:00:00\",\n      message: \"\",\n      messages: [],\n      stage_users: [],\n      viewers: [],\n      youtubeSecret: \"\",\n      board: false,\n      userToDraw: null,\n    };\n  },\n  computed: {\n    admin() {\n      return this.$store.getters.role;\n    },\n    username() {\n      return this.$store.getters.username;\n    },\n    userId() {\n      return this.$store.getters.userId;\n    },\n  },\n  watch: {\n    stage: (val) => {\n      // console.log(val);\n    },\n  },\n  methods: {\n    startLive() {\n      console.log(this.stage);\n      socket().emit(\"add_boradcaster\", this.stage);\n    },\n    stopLive() {\n      socket().emit(\"stop\", this.stage);\n      this.time = \"00:00:00\";\n      this.seconds = 0;\n      this.messages = [];\n    },\n    sendMessage() {\n      socket().emit(\"do_comment\", {\n        name: this.username,\n        text: this.message,\n      });\n      this.message = \"\";\n    },\n    changeStage() {\n      this.getStageUsers();\n    },\n    getStageUsers() {\n      if (this.admin != 1) return;\n      Axios.get(\"/getStageUsers/\" + this.stage).then((res) => {\n        this.stage_users = res.data.users;\n      });\n    },\n    isOnline(id) {\n      const state = this.viewers.includes(id) ? \"online\" : \"offline\";\n      return state;\n    },\n  },\n\n  destroyed() {\n    socket().emit(\"quit\", this.userId);\n    if (this.admin == 1) {\n      this.stopLive();\n    }\n  },\n};\n</script>\n<style lang=\"scss\">\n.cont {\n  padding: 120px 12px 100px 12px;\n  h3 {\n    background: rgba(161, 159, 159, 0.803);\n    padding: 6px 5px;\n  }\n  @media (max-width: 500px) {\n    padding: 120px 0 100px 0;\n    h3 {\n      font-size: 1.2rem;\n    }\n  }\n  background: rgba(201, 202, 204, 0.701);\n  width: 100%;\n}\n.timer {\n  text-align: center;\n  font-weight: 600;\n  font-size: 3rem;\n  @media (max-width: 500px) {\n    font-size: 1.5rem;\n  }\n}\n.video {\n  height: 100%;\n  .overlay1 {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 70%;\n    background: rgba(146, 144, 144, 0.061);\n  }\n  .overlay2 {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 20%;\n    background: rgba(146, 144, 144, 0.061);\n  }\n}\n.comments {\n  background: rgb(255, 255, 255);\n  @media (max-width: 500px) {\n    h5 {\n      font-size: 1.1rem;\n    }\n  }\n  .messages {\n    padding: 10px;\n    height: 50vh;\n    overflow-y: auto;\n    .message {\n      border-radius: 15px;\n      margin-top: 20px;\n      padding: 10px;\n      border-bottom: 1px solid rgba(28, 70, 83, 0.585);\n      .name,\n      .text {\n        text-align: right;\n      }\n      .name {\n        color: #555;\n        border-bottom: 1px solid rgba(165, 164, 164, 0.224);\n      }\n      .text {\n        margin-top: 9px;\n        padding-right: 10px;\n      }\n    }\n  }\n  .send {\n    button {\n      width: 100%;\n    }\n  }\n}\n\n.online-users {\n  margin: 40px auto;\n  height: 120px;\n  overflow: hidden;\n  @media (max-width: 500px) {\n    max-height: 50vh;\n  }\n  h5 {\n    text-align: center;\n  }\n  .users {\n    direction: rtl;\n    // display: flex;\n    // justify-content: center;\n    // align-items: center;\n    background: #fff;\n    overflow: auto;\n    .user {\n      text-align: center;\n      .state {\n        margin-right: 5px;\n        color: red;\n        &.online {\n          color: green;\n        }\n      }\n    }\n  }\n}\n.butt {\n  .start {\n    background: rgba(0, 0, 0, 0.796);\n    color: #fff;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./live-video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./live-video.vue?vue&type=template&id=ade43abc&\"\nimport script from \"./live-video.vue?vue&type=script&lang=js&\"\nexport * from \"./live-video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./live-video.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}